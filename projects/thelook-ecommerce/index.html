<!DOCTYPE html>
<html>

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta http-equiv="Accept-CH" content="DPR, Viewport-Width, Width">
<link rel="icon" href=/fav1.png type="image/gif">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      media="print" onload="this.media='all'" />
<noscript>
  <link
          href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
          rel="stylesheet">
</noscript>


<link rel="stylesheet" href="/css/font.css" media="all">



<meta property="og:title" content="theLook eCommerce 2022 - SQL" />
<meta property="og:description" content="Situation I conducted SQL analysis on ecommerce data from TheLook to provide growth and retention insights to inform optimization decisions during a potential crisis.
Backround TheLook is an ecommerce clothing retailer anticipating an economic downturn in 2023. To optimize their business, management needs to strategically cut costs in underperforming areas.
TheLook lacks insights into their category growth and customer retention metrics. This data is required to determine which categories have momentum versus which are stagnating." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hansproject.github.io/projects/thelook-ecommerce/" /><meta property="article:section" content="projects" />
<meta property="article:published_time" content="2023-09-23T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-09-23T00:00:00+00:00" /><meta property="og:site_name" content="Han&#39;s Project" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="theLook eCommerce 2022 - SQL"/>
<meta name="twitter:description" content="Situation I conducted SQL analysis on ecommerce data from TheLook to provide growth and retention insights to inform optimization decisions during a potential crisis.
Backround TheLook is an ecommerce clothing retailer anticipating an economic downturn in 2023. To optimize their business, management needs to strategically cut costs in underperforming areas.
TheLook lacks insights into their category growth and customer retention metrics. This data is required to determine which categories have momentum versus which are stagnating."/>


<link rel="stylesheet" href="/bootstrap-5/css/bootstrap.min.css" media="all"><link rel="stylesheet" href="/css/header.css" media="all">
<link rel="stylesheet" href="/css/footer.css" media="all">


<link rel="stylesheet" href="/css/theme.css" media="all">




<style>
    :root {
        --text-color: #343a40;
        --text-secondary-color: #6c757d;
        --background-color: #eaedf0;
        --secondary-background-color: #64ffda1a;
        --primary-color: #007bff;
        --secondary-color: #f8f9fa;

         
        --text-color-dark: #e4e6eb;
        --text-secondary-color-dark: #b0b3b8;
        --background-color-dark: #18191a;
        --secondary-background-color-dark: #212529;
        --primary-color-dark: #ffffff;
        --secondary-color-dark: #212529;
    }
    body {
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        text-align: left;
    }

    html {
        background-color: var(--background-color) !important;
    }

    body::-webkit-scrollbar {
        width: .5em;
        height: .5em;
        background-color: var(--background-color);
    }
    
    ::-webkit-scrollbar-track {
        box-shadow: inset 0 0 6px var(--background-color);
        border-radius: 1rem;
    }
    
    ::-webkit-scrollbar-thumb {
        border-radius: 1rem;
        background-color: var(--secondary-color);
        outline: 1px solid var(--background-color);
    }

    #search-content::-webkit-scrollbar {
        width: .5em;
        height: .1em;
        background-color: var(--background-color);
    }
</style>

<meta name="description" content="">
<link rel="stylesheet" href="/css/single.css">


<script defer src="/fontawesome-5/all-5.15.4.js"></script>

  <title>
theLook eCommerce 2022 - SQL | Shalhan Assalam - Data Analyst

  </title>
</head>

<body class="light">
  
  
<script>
    let localStorageValue = localStorage.getItem("pref-theme");
    let mediaQuery = window.matchMedia('(prefers-color-scheme: dark)').matches;

    switch (localStorageValue) {
        case "dark":
            document.body.classList.add('dark');
            break;
        case "light":
            document.body.classList.remove('dark');
            break;
        default:
            if (mediaQuery) {
                document.body.classList.add('dark');
            }
            break;
    }
</script>



<header>
    <nav class="pt-3 navbar navbar-expand-lg animate">
        <div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5">
            
            <a class="navbar-brand primary-font text-wrap" href="/">
                
                <img src="/fav1.png" width="30" height="30"
                    class="d-inline-block align-top">
                Han&#39;s Project
                
            </a>

            
                <div>
                    <input id="search" autocomplete="off" class="form-control mr-sm-2 d-none d-md-block" placeholder='Search my projects'
                        aria-label="Search" oninput="searchOnChange(event)">
                </div>
            

            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
                <svg aria-hidden="true" height="24" viewBox="0 0 16 16" version="1.1" width="24" data-view-component="true">
                    <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z"></path>
                </svg>
            </button>

            
            <div class="collapse navbar-collapse text-wrap primary-font" id="navbarContent">
                <ul class="navbar-nav ms-auto text-center">
                    
                        <li class="nav-item navbar-text d-block d-md-none">
                            <div class="nav-link">
                                <input id="search" autocomplete="off" class="form-control mr-sm-2" placeholder='Search my projects' aria-label="Search" oninput="searchOnChange(event)">
                            </div>
                        </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#about" aria-label="about">
                            About Me
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#experience"
                            aria-label="experience">
                            Experience
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#education"
                            aria-label="education">
                            Education
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#projects"
                            aria-label="projects">
                            Projects
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#achievements"
                            aria-label="achievements">
                            Achievements
                        </a>
                    </li>
                    

                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/#contact"
                            aria-label="contact">
                            Contact
                        </a>
                    </li>
                    

                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/projects" title="Data Analytics Projects">
                            
                            Portfolio
                        </a>
                    </li>
                    
                    
                    
                    
                    <li class="nav-item navbar-text">
                        <a class="nav-link" href="/gallery" title="Blog posts">
                            
                            Gallery
                        </a>
                    </li>
                    
                    

                    
                    <li class="nav-item navbar-text">
                        
                        <div class="text-center">
                            <button id="theme-toggle">
                                <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                                </svg>
                                <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="5"></circle>
                                    <line x1="12" y1="1" x2="12" y2="3"></line>
                                    <line x1="12" y1="21" x2="12" y2="23"></line>
                                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                    <line x1="1" y1="12" x2="3" y2="12"></line>
                                    <line x1="21" y1="12" x2="23" y2="12"></line>
                                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                                </svg>
                            </button>
                        </div>
                    </li>
                    

                </ul>

            </div>
        </div>
    </nav>
</header>
<div id="content">
<section id="single">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-sm-12 col-md-12 col-lg-9">
        <div class="pr-lg-4">
          <div class="title mb-5">
            <h1 class="text-center mb-4">theLook eCommerce 2022 - SQL</h1>
            <div class="text-center">
              Muhammad Shalhan Assalam 
              <small>|</small>
              Sep 23, 2023

              
              <span id="readingTime">
                min read
              </span>
              
            </div>
          </div>
          
          <div class="featured-image">
            <img class="img-fluid" src="/images/thelook-ecommerce/main.jpg" alt="theLook eCommerce 2022 - SQL">
          </div>
          
          <article class="page-content  p-2">
          <h2 id="situation">Situation</h2>
<p>I conducted SQL analysis on ecommerce data from TheLook to provide growth and retention insights to inform optimization decisions during a potential crisis.</p>
<h3 id="backround">Backround</h3>
<p>TheLook is an ecommerce clothing retailer anticipating an economic downturn in 2023. To optimize their business, management needs to strategically cut costs in underperforming areas.</p>
<p>TheLook lacks insights into their category growth and customer retention metrics. This data is required to determine which categories have momentum versus which are stagnating. By conducting SQL analysis on their historical transaction data, I can provide data-backed recommendations on where TheLook should double down versus reduce operational resources. Focusing on high-growth categories with loyal customers, while cutting costs in lagging segments, will help TheLook successfully weather the anticipated crisis. My data-driven insights will enable optimization decisions that balance growth opportunities with the need for tighter spending.</p>
<h3 id="problem-definition">Problem Definition</h3>
<p>The problem was that TheLook lacked insights into category growth and customer retention trends needed to strategically optimize operations.</p>
<h3 id="objective">Objective</h3>
<p>This project demonstrates SQL and BigQuery proficiency through:</p>
<ol>
<li>Data retrieval: Extracting insights from large datasets via targeted SQL queries.</li>
<li>Aggregation: Summarizing complex data using SQL functions.</li>
<li>Joins: Combining disparate data sources via SQL joins.</li>
<li>Transformation: Manipulating and formatting data using SQL operations.</li>
</ol>
<h2 id="task--action">Task &amp; Action</h2>
<table>
<thead>
<tr>
<th>Task</th>
<th>Action</th>
<th>Reason</th>
</tr>
</thead>
<tbody>
<tr>
<td>Understand business context</td>
<td>Reviewed background details on TheLook&rsquo;s situation</td>
<td>Identified key optimization goals and constraints</td>
</tr>
<tr>
<td>Review data dictionary</td>
<td>Studied table schemas and column definitions</td>
<td>Familiarized myself with available data</td>
</tr>
<tr>
<td>Define analysis goals</td>
<td>Outlined how the data could inform category optimization decisions</td>
<td>Aligned plan to business needs</td>
</tr>
<tr>
<td>Query category growth</td>
<td>Calculated monthly category growth percentages ordered by time with SQL</td>
<td>Provided trends showing high/low growth categories</td>
</tr>
<tr>
<td>Analyze growth insights</td>
<td>Identified categories with strongest/weakest growth in past year</td>
<td>Revealed areas to prioritize and cut back</td>
</tr>
<tr>
<td>Build retention cohorts</td>
<td>Created cohorts based on first purchase date and analyzed retention with SQL</td>
<td>Measured customer loyalty trends by category</td>
</tr>
<tr>
<td>Synthesize recommendations</td>
<td>Recommended categories to focus on or reduce based on growth and retention insights</td>
<td>Optimized business based on data findings</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="result---slide-deck">Result - Slide Deck</h2>
<h3 id="erd-scheme">ERD Scheme</h3>
<img src='/images/thelook-ecommerce/erd.png' alt='theLook E-Commerce ERD'>
I've made ERD scheme to look how entity related each other. So, we will start our analysis from:
<h3 id="1-identify-categories-with-the-lowest-business-growth">1. Identify categories with the lowest business growth.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> 
</span></span><span style="display:flex;"><span>  p.category,
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">SUM</span>(oi.sale_price<span style="color:#f92672">*</span>o.num_of_item) <span style="color:#66d9ef">AS</span> revenue,
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">COUNT</span>(o.order_id) <span style="color:#66d9ef">AS</span> quantity
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> <span style="color:#f92672">`</span>bigquery<span style="color:#f92672">-</span><span style="color:#66d9ef">public</span><span style="color:#f92672">-</span><span style="color:#66d9ef">data</span>.thelook_ecommerce.order_items<span style="color:#f92672">`</span> <span style="color:#66d9ef">AS</span> oi
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> <span style="color:#f92672">`</span>bigquery<span style="color:#f92672">-</span><span style="color:#66d9ef">public</span><span style="color:#f92672">-</span><span style="color:#66d9ef">data</span>.thelook_ecommerce.orders<span style="color:#f92672">`</span> <span style="color:#66d9ef">AS</span> o 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">ON</span> oi.order_id <span style="color:#f92672">=</span> o.order_id
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">JOIN</span> <span style="color:#f92672">`</span>bigquery<span style="color:#f92672">-</span><span style="color:#66d9ef">public</span><span style="color:#f92672">-</span><span style="color:#66d9ef">data</span>.thelook_ecommerce.products<span style="color:#f92672">`</span> <span style="color:#66d9ef">AS</span> p
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">ON</span> oi.product_id <span style="color:#f92672">=</span> p.id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> oi.status <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">IN</span> (<span style="color:#e6db74">&#39;Cancelled&#39;</span>, <span style="color:#e6db74">&#39;Returned&#39;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">AND</span> <span style="color:#66d9ef">EXTRACT</span>(<span style="color:#66d9ef">YEAR</span> <span style="color:#66d9ef">FROM</span> DATE(o.delivered_at)) <span style="color:#f92672">=</span> <span style="color:#ae81ff">2022</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">DESC</span>;
</span></span></code></pre></div><h4 id="query-result">Query Result</h4>
<iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vTZfTBe7dkYLTA7pWMVADEU2oX6WHhywXaUkr6lFjmO4p5puMlw9HrQKA0yh5nh0qJV6FGFsi4QMkpa/pubhtml?gid=1796125997&amp;single=true&amp;widget=true&amp;headers=false" frameborder="0" width="100%" height="600" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
<p>Clothings sets and Jumpsuit &amp; Rompers are the top 20% lowest order percentile followed with small proportion of revenue.</p>
<h3 id="2-calculate-monthly-growth-of-inventory-in-percentage-by-product-categories">2. Calculate monthly growth of inventory in percentage by product categories.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">WITH</span> monthly_inventory <span style="color:#66d9ef">AS</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span>(product_category), 
</span></span><span style="display:flex;"><span>         DATE_TRUNC(DATE(created_at), <span style="color:#66d9ef">MONTH</span>) <span style="color:#66d9ef">AS</span> <span style="color:#66d9ef">month</span>, 
</span></span><span style="display:flex;"><span>         <span style="color:#66d9ef">COUNT</span>(<span style="color:#66d9ef">DISTINCT</span> id) <span style="color:#66d9ef">AS</span> inventory_count
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">FROM</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">sql</span><span style="color:#f92672">-</span>project<span style="color:#f92672">-</span><span style="color:#ae81ff">376612</span>.thelook_ecommerce.inventory_items<span style="color:#f92672">`</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">month</span>, product_category
</span></span><span style="display:flex;"><span>),
</span></span><span style="display:flex;"><span>monthly_growth <span style="color:#66d9ef">AS</span> (
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> product_category, 
</span></span><span style="display:flex;"><span>                  <span style="color:#66d9ef">month</span>, 
</span></span><span style="display:flex;"><span>                  inventory_count,
</span></span><span style="display:flex;"><span>                  LAG(inventory_count) OVER (PARTITION <span style="color:#66d9ef">BY</span> product_category <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">month</span>) <span style="color:#66d9ef">AS</span> previous_count,
</span></span><span style="display:flex;"><span>                  (inventory_count <span style="color:#f92672">-</span> LAG(inventory_count) OVER (PARTITION <span style="color:#66d9ef">BY</span> product_category <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">month</span>))  <span style="color:#66d9ef">AS</span> month_growth
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">FROM</span> monthly_inventory
</span></span><span style="display:flex;"><span>),
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">month</span>, 
</span></span><span style="display:flex;"><span>       product_category, 
</span></span><span style="display:flex;"><span>       inventory_count, 
</span></span><span style="display:flex;"><span>       previous_count,
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">CASE</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">WHEN</span> previous_count <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">THEN</span> ROUND((month_growth <span style="color:#f92672">/</span> previous_count) <span style="color:#f92672">*</span> <span style="color:#ae81ff">100</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">ELSE</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">END</span> <span style="color:#66d9ef">AS</span> growth_percentage
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> monthly_growth
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">month</span> <span style="color:#66d9ef">BETWEEN</span> <span style="color:#e6db74">&#39;2022-01-01&#39;</span> <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#39;2022-12-31&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">month</span> <span style="color:#66d9ef">DESC</span>; <span style="color:#75715e">--Order by month descendingly
</span></span></span></code></pre></div><h4 id="query-result-1">Query Result</h4>
<iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vTZfTBe7dkYLTA7pWMVADEU2oX6WHhywXaUkr6lFjmO4p5puMlw9HrQKA0yh5nh0qJV6FGFsi4QMkpa/pubhtml?gid=1095857528&amp;single=true&amp;widget=true&amp;headers=false" frameborder="0" width="100%" height="600" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
<p>Using standard deviation of monthly growth inventory, we can identify which brand has unstable supply stock, it means these kind of category product relatively has low market share and market demand. From the spreadsheet, clothing sets, suits, and Jumpsuit &amp; rompers are top 3 categories that has unstable growth of inventory.</p>
<h3 id="3-create-monthly-user-retention-cohorts">3. Create monthly user retention cohorts.</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-SQL" data-lang="SQL"><span style="display:flex;"><span><span style="color:#66d9ef">WITH</span> cte_l <span style="color:#66d9ef">AS</span> (
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> user_id <span style="color:#66d9ef">AS</span> userid, 
</span></span><span style="display:flex;"><span>               <span style="color:#66d9ef">MIN</span>(DATE_TRUNC(DATE(created_at), <span style="color:#66d9ef">MONTH</span>)) OVER(PARTITION <span style="color:#66d9ef">BY</span> user_id) <span style="color:#66d9ef">AS</span> first_purchase_date,
</span></span><span style="display:flex;"><span>               DATE_TRUNC(DATE(created_at), <span style="color:#66d9ef">MONTH</span>) <span style="color:#66d9ef">AS</span> running_purchase_date 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> <span style="color:#f92672">`</span><span style="color:#66d9ef">sql</span><span style="color:#f92672">-</span>project<span style="color:#f92672">-</span><span style="color:#ae81ff">376612</span>.thelook_ecommerce.orders<span style="color:#f92672">`</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> status <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">‘</span>Complete<span style="color:#960050;background-color:#1e0010">’</span> <span style="color:#960050;background-color:#1e0010">–</span><span style="color:#66d9ef">order</span> arrived, <span style="color:#66d9ef">no</span> complaints<span style="color:#f92672">/</span><span style="color:#66d9ef">return</span> <span style="color:#f92672">=</span> complete orders
</span></span><span style="display:flex;"><span>),
</span></span><span style="display:flex;"><span>cte_2 <span style="color:#66d9ef">AS</span> (
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> ,
</span></span><span style="display:flex;"><span>               DATE_DIFF(running_purchase_date, first_purchase_date, <span style="color:#66d9ef">MONTH</span>) <span style="color:#66d9ef">AS</span> diff_month,
</span></span><span style="display:flex;"><span>               <span style="color:#66d9ef">COUNT</span>(<span style="color:#66d9ef">DISTINCT</span> userid) OVER(PARTITION <span style="color:#66d9ef">BY</span> first_purchase_date) <span style="color:#66d9ef">AS</span> cohort_size
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> cte_l
</span></span><span style="display:flex;"><span>),
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cte_3 <span style="color:#66d9ef">AS</span> (
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> first_purchase_date, diff_month <span style="color:#66d9ef">AS</span> <span style="color:#66d9ef">month</span>, cohort_size,
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">COUNT</span>(<span style="color:#66d9ef">DISTINCT</span> userid) <span style="color:#66d9ef">AS</span> total_user
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> cte_2
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> first_purchase_date <span style="color:#66d9ef">BETWEEN</span> <span style="color:#e6db74">&#39;2022-01-01&#39;</span> <span style="color:#66d9ef">AND</span> <span style="color:#e6db74">&#39;2022-12-31&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span>, total_user<span style="color:#f92672">/</span>cohort_size <span style="color:#66d9ef">AS</span> total_user_perc
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> cte_3
</span></span></code></pre></div><h4 id="query-result-2">Query Result</h4>
<iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vTZfTBe7dkYLTA7pWMVADEU2oX6WHhywXaUkr6lFjmO4p5puMlw9HrQKA0yh5nh0qJV6FGFsi4QMkpa/pubhtml?gid=1152685692&amp;single=true&amp;widget=true&amp;headers=false" frameborder="0" width="100%" height="600" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
<p>Cohort shows thelook e-commerce suffers extreme drop on monthly cohort at M+1. After one month of purchase, thelook e-commerce already lost 97-98% of their previous customers, leaving 1-3% in the next month.</p>
<h3 id="result-slide-deck">Result Slide Deck</h3>
<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vSMDsomAA8gCgSyAxA4G-zBBAnfj-qyDi4wCCEjNF7Uum7K2ly9gM57xTmd3W5UDg/embed?start=false&loop=false&delayms=3000" frameborder="0" width="100%" height="491" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>
<hr>
<h3 id="attachments">Attachments</h3>
<p><a href="https://console.cloud.google.com/marketplace/product/bigquery-public-data/thelook-ecommerce" target="_blank">&raquo; Dataset Link &laquo;</a> | <a href="https://docs.google.com/spreadsheets/d/1GN_VoULb5wYdJjFMnJhS2Woav9X068eDSXtoNStdmIs/edit?usp=sharing" target="_blank">&raquo; Spreadsheet Link &laquo;</a> | <a href="https://console.cloud.google.com/bigquery?sq=672271115142:8abf34fbd0d74c0cbe4a32d37fdf8791" target="_blank">&raquo; Big Query Link &laquo;</a></p>
<hr>
<p>I&rsquo;m grateful you took the time to explore my portfolio site and view my work. Your interest means a lot.</p>
<p>Feel free to provide any feedback or ask questions - I welcome your thoughts. Thank you again for checking out my projects and considering my skills. I appreciate you taking the time to do so.</p>
<p><a href="https://www.linkedin.com/in/muhammad-shalhan-assalam-b42973200/" target="_blank">&raquo; Let&rsquo;s get in touch on LinkedIn! &laquo;</a></p>

          </article>
        </div>
      </div>
      <div class="col-sm-12 col-md-12 col-lg-3">
        <div class="sticky-sidebar">
          
          <aside class="toc">
              <h5>
                Table Of Contents
              </h5>
              <div class="toc-content">
                <nav id="TableOfContents">
  <ul>
    <li><a href="#situation">Situation</a>
      <ul>
        <li><a href="#backround">Backround</a></li>
        <li><a href="#problem-definition">Problem Definition</a></li>
        <li><a href="#objective">Objective</a></li>
      </ul>
    </li>
    <li><a href="#task--action">Task &amp; Action</a></li>
    <li><a href="#result---slide-deck">Result - Slide Deck</a>
      <ul>
        <li><a href="#erd-scheme">ERD Scheme</a></li>
        <li><a href="#1-identify-categories-with-the-lowest-business-growth">1. Identify categories with the lowest business growth.</a></li>
        <li><a href="#2-calculate-monthly-growth-of-inventory-in-percentage-by-product-categories">2. Calculate monthly growth of inventory in percentage by product categories.</a></li>
        <li><a href="#3-create-monthly-user-retention-cohorts">3. Create monthly user retention cohorts.</a></li>
        <li><a href="#result-slide-deck">Result Slide Deck</a></li>
        <li><a href="#attachments">Attachments</a></li>
      </ul>
    </li>
  </ul>
</nav>
              </div>
          </aside>
          

          
          <aside class="tags">
            <h5>Tags</h5>
            <ul class="tags-ul list-unstyled list-inline">
              
              <li class="list-inline-item"><a href="https://hansproject.github.io/tags/e-commerce" target="_blank">E-Commerce</a></li>
              
              <li class="list-inline-item"><a href="https://hansproject.github.io/tags/eda" target="_blank">EDA</a></li>
              
              <li class="list-inline-item"><a href="https://hansproject.github.io/tags/sql" target="_blank">SQL</a></li>
              
              <li class="list-inline-item"><a href="https://hansproject.github.io/tags/cte" target="_blank">CTE</a></li>
              
              <li class="list-inline-item"><a href="https://hansproject.github.io/tags/market-basket-analysis" target="_blank">Market Basket Analysis</a></li>
              
            </ul>
          </aside>
          

          
          <aside class="social">
            <h5>Social</h5>
            <div class="social-content">
              <ul class="list-inline">
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://twitter.com/share?text=theLook%20eCommerce%202022%20-%20SQL&url=https%3a%2f%2fhansproject.github.io%2fprojects%2fthelook-ecommerce%2f">
                    <i class="fab fa-twitter"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href="https://api.whatsapp.com/send?text=theLook%20eCommerce%202022%20-%20SQL: https%3a%2f%2fhansproject.github.io%2fprojects%2fthelook-ecommerce%2f">
                    <i class="fab fa-whatsapp"></i>
                  </a>
                </li>
                <li class="list-inline-item text-center">
                  <a target="_blank" href='mailto:?subject=theLook%20eCommerce%202022%20-%20SQL&amp;body=Check%20out%20this%20site https%3a%2f%2fhansproject.github.io%2fprojects%2fthelook-ecommerce%2f'>
                    <i class="fa fa-envelope"></i>
                  </a>
                </li>
              </ul>
            </div>
          </aside>
          
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-9 p-4">
        
      </div>
    </div>
  </div>
  <button class="p-2 px-3" onclick="topFunction()" id="topScroll">
    <i class="fas fa-angle-up"></i>
  </button>
</section>


<div class="progress">
  <div id="scroll-progress-bar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>
<Script src="/js/scrollProgressBar.js"></script>


<script>
  var topScroll = document.getElementById("topScroll");
  window.onscroll = function() {scrollFunction()};

  function scrollFunction() {
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
      topScroll.style.display = "block";
    } else {
      topScroll.style.display = "none";
    }
  }

  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }
</script>


<script src="/js/readingTime.js"></script>



  </div><footer>
    
 

<div class="text-center pt-2">
    
    <span class="px-1">
        <a href="https://github.com" aria-label="github">
            <svg xmlns="http://www.w3.org/2000/svg" width="2.7em" height="2.7em" viewBox="0 0 1792 1792">
                <path
                    d="M522 1352q-8 9-20-3-13-11-4-19 8-9 20 3 12 11 4 19zm-42-61q9 12 0 19-8 6-17-7t0-18q9-7 17 6zm-61-60q-5 7-13 2-10-5-7-12 3-5 13-2 10 5 7 12zm31 34q-6 7-16-3-9-11-2-16 6-6 16 3 9 11 2 16zm129 112q-4 12-19 6-17-4-13-15t19-7q16 5 13 16zm63 5q0 11-16 11-17 2-17-11 0-11 16-11 17-2 17 11zm58-10q2 10-14 14t-18-8 14-15q16-2 18 9zm964-956v960q0 119-84.5 203.5t-203.5 84.5h-224q-16 0-24.5-1t-19.5-5-16-14.5-5-27.5v-239q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105 20.5-150.5q0-121-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27t-83.5-38.5-86-13.5q-44 113-7 204-79 85-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-40 36-49 103-21 10-45 15t-57 5-65.5-21.5-55.5-62.5q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 103t.5 68q0 22-11 33.5t-22 13-33 1.5h-224q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z" />

                <metadata>
                    <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                        xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" xmlns:dc="http://purl.org/dc/elements/1.1/">
                        <rdf:Description about="https://iconscout.com/legal#licenses"
                            dc:title="Github, Online, Project, Hosting, Square"
                            dc:description="Github, Online, Project, Hosting, Square" dc:publisher="Iconscout"
                            dc:date="2016-12-14" dc:format="image/svg+xml" dc:language="en">
                            <dc:creator>
                                <rdf:Bag>
                                    <rdf:li>Font Awesome</rdf:li>
                                </rdf:Bag>
                            </dc:creator>
                        </rdf:Description>
                    </rdf:RDF>
                </metadata>
            </svg>
        </a>
    </span>
    

    
    <span class="px-1">
        <a href="https://linkedin.com" aria-label="linkedin">
            <svg xmlns="http://www.w3.org/2000/svg" width='2.4em' height='2.4em' fill="#fff" aria-label="LinkedIn"
                viewBox="0 0 512 512">
                <rect width="512" height="512" fill="#0077b5" rx="15%" />
                <circle cx="142" cy="138" r="37" />
                <path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198" />
                <path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32" />
            </svg>
        </a>
    </span>
    

    
    <a href="https://twitter.com" aria-label="twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48px" height="48px">
            <path fill="#03a9f4"
                d="M42,37c0,2.762-2.239,5-5,5H11c-2.762,0-5-2.238-5-5V11c0-2.762,2.238-5,5-5h26c2.761,0,5,2.238,5,5 V37z" />
            <path fill="#fff"
                d="M36,17.12c-0.882,0.391-1.999,0.758-3,0.88c1.018-0.604,2.633-1.862,3-3 c-0.951,0.559-2.671,1.156-3.793,1.372C31.311,15.422,30.033,15,28.617,15C25.897,15,24,17.305,24,20v2c-4,0-7.9-3.047-10.327-6 c-0.427,0.721-0.667,1.565-0.667,2.457c0,1.819,1.671,3.665,2.994,4.543c-0.807-0.025-2.335-0.641-3-1c0,0.016,0,0.036,0,0.057 c0,2.367,1.661,3.974,3.912,4.422C16.501,26.592,16,27,14.072,27c0.626,1.935,3.773,2.958,5.928,3c-1.686,1.307-4.692,2-7,2 c-0.399,0-0.615,0.022-1-0.023C14.178,33.357,17.22,34,20,34c9.057,0,14-6.918,14-13.37c0-0.212-0.007-0.922-0.018-1.13 C34.95,18.818,35.342,18.104,36,17.12" />
        </svg>
    </a>
    

    
    <a href="https://instagram.com" aria-label="instagram">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48px" height="48px">
            <radialGradient id="yOrnnhliCrdS2gy~4tD8ma" cx="19.38" cy="42.035" r="44.899"
                gradientUnits="userSpaceOnUse">
                <stop offset="0" stop-color="#fd5" />
                <stop offset=".328" stop-color="#ff543f" />
                <stop offset=".348" stop-color="#fc5245" />
                <stop offset=".504" stop-color="#e64771" />
                <stop offset=".643" stop-color="#d53e91" />
                <stop offset=".761" stop-color="#cc39a4" />
                <stop offset=".841" stop-color="#c837ab" />
            </radialGradient>
            <path fill="url(#yOrnnhliCrdS2gy~4tD8ma)"
                d="M34.017,41.99l-20,0.019c-4.4,0.004-8.003-3.592-8.008-7.992l-0.019-20	c-0.004-4.4,3.592-8.003,7.992-8.008l20-0.019c4.4-0.004,8.003,3.592,8.008,7.992l0.019,20	C42.014,38.383,38.417,41.986,34.017,41.99z" />
            <radialGradient id="yOrnnhliCrdS2gy~4tD8mb" cx="11.786" cy="5.54" r="29.813"
                gradientTransform="matrix(1 0 0 .6663 0 1.849)" gradientUnits="userSpaceOnUse">
                <stop offset="0" stop-color="#4168c9" />
                <stop offset=".999" stop-color="#4168c9" stop-opacity="0" />
            </radialGradient>
            <path fill="url(#yOrnnhliCrdS2gy~4tD8mb)"
                d="M34.017,41.99l-20,0.019c-4.4,0.004-8.003-3.592-8.008-7.992l-0.019-20	c-0.004-4.4,3.592-8.003,7.992-8.008l20-0.019c4.4-0.004,8.003,3.592,8.008,7.992l0.019,20	C42.014,38.383,38.417,41.986,34.017,41.99z" />
            <path fill="#fff"
                d="M24,31c-3.859,0-7-3.14-7-7s3.141-7,7-7s7,3.14,7,7S27.859,31,24,31z M24,19c-2.757,0-5,2.243-5,5	s2.243,5,5,5s5-2.243,5-5S26.757,19,24,19z" />
            <circle cx="31.5" cy="16.5" r="1.5" fill="#fff" />
            <path fill="#fff"
                d="M30,37H18c-3.859,0-7-3.14-7-7V18c0-3.86,3.141-7,7-7h12c3.859,0,7,3.14,7,7v12	C37,33.86,33.859,37,30,37z M18,13c-2.757,0-5,2.243-5,5v12c0,2.757,2.243,5,5,5h12c2.757,0,5-2.243,5-5V18c0-2.757-2.243-5-5-5H18z" />
        </svg>
    </a>
    

    
    <a href="https://facebook.com" aria-label="facebook">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48px" height="48px">
            <path fill="#3F51B5"
                d="M42,37c0,2.762-2.238,5-5,5H11c-2.761,0-5-2.238-5-5V11c0-2.762,2.239-5,5-5h26c2.762,0,5,2.238,5,5V37z" />
            <path fill="#FFF"
                d="M34.368,25H31v13h-5V25h-3v-4h3v-2.41c0.002-3.508,1.459-5.59,5.592-5.59H35v4h-2.287C31.104,17,31,17.6,31,18.723V21h4L34.368,25z" />
        </svg>
    </a>
    
</div><div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-4 text-center">
            <div class="pb-2">
                <a href="https://hansproject.github.io" title="Shalhan Assalam - Data Analyst">
                    <img alt="Footer logo" src="/fav1.png"
                        height="40px" width="40px">
                </a>
            </div>
            &copy; 2023  All rights reserved
            <div class="text-secondary">
                Made with
                <span class="text-danger">
                    &#10084;
                </span>
                and
                <a href="https://github.com/gurusabarish/hugo-profile" target="_blank"
                    title="Designed and developed by gurusabarish">
                    Hugo Profile
                </a>
            </div>
        </div>
    </div>
</div></footer><script src="/bootstrap-5/js/bootstrap.bundle.min.js"></script>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })

</script>


    <script src="/js/search.js"></script>











  <section id="search-content" class="py-2">
    <div class="container" id="search-results"></div>
  </section>
</body>

</html>